import subprocess

def run_test(args, expected_output):
    print(f'\n{" ".join(["./philo"] + args)}')
    print(f'Expected output: {expected_output}')
    input('Press enter to run this test...')
    result = subprocess.run(['./philo'] + args, stdout=subprocess.PIPE)
    output = result.stdout.decode('utf-8').strip()
    print(f'Output: {output}\n')
    input('Press enter to continue to the next test...')

def test_philo():
    run_test(['1'], 'Invalid argument / usage message.')
    run_test(['1', '2'], 'Invalid argument / usage message.')
    run_test(['1', '2', '3'], 'Invalid argument / usage message.')
    run_test(['4', '500', 'abc', '200'], 'Invalid argument.')
    run_test(['4', '500', '200', '2.9'], 'Invalid argument.')
    run_test(['4', '-500', '200', '200'], 'Invalid argument.')
    run_test(['4', '2147483648', '200', '200'], 'Invalid argument.')
    run_test(['0', '800', '200', '200'], 'Invalid argument.')
    run_test(['500', '100', '200', '200'], 'A philosopher dies at 100 ms.')
    run_test(['4', '2147483647', '200', '200'], 'No one dies.')
    run_test(['4', '200', '2147483647', '200'], 'A philosopher dies at 200 ms.')
    run_test(['4', '800', '200', '2147483647'], 'A philosopher dies at 800 ms.')
    run_test(['2', '800', '200', '200'], 'No one dies.')
    run_test(['5', '800', '200', '200'], 'No one dies.')
    run_test(['5', '0', '200', '200'], 'A philosopher dies at 0 ms.')
    run_test(['5', '800', '0', '200'], 'No one dies.')
    run_test(['5', '800', '200', '0'], 'No one dies.')
    run_test(['5', '800', '0', '0'], 'No one dies.')
    run_test(['5', '800', '200', '200', '0'], 'Simulation stops immediately because everyone ate 0 times.')
    run_test(['4', '410', '200', '200'], 'No one dies.')
    run_test(['1', '200', '200', '200'], 'Philosopher 1 takes a fork and dies at 200 ms.')
    run_test(['4', '2147483647', '0', '0'], 'No one dies.')
    run_test(['4', '200', '210', '200'], 'A philosopher dies at 200 ms.')
    run_test(['2', '600', '200', '800'], 'A philosopher dies at 600 ms.')
    run_test(['4', '310', '200', '200'], 'A philosopher dies at 310 ms.')
    run_test(['3', '400', '100', '100', '3'], 'No one dies, each philosopher eats at least 3 times.')
    run_test(['200', '800', '200', '200', '9'], 'No one dies, each philosopher eats at least 9 times.')
    run_test(['200', '410', '200', '200'], 'A philosopher dies at 410 ms.')

if __name__ == '__main__':
	test_philo()